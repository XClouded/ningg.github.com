---
layout: post
title: 正则表达式（字符串匹配模式）
description: 正则表达式，以简单、高效的方式，实现字符串的复杂匹配操作
category: Regular Exp
---

##背景

最近队长安排我用Pig解析一下日志文件，在数据装载过程中，需要抽取原始日志文件中特定位置的字符串*（即使是数字、符号，在程序看来也是字符）。*

回想起之前的团队中，CZW对正则表达式进行过技术分享，深入浅出，反正当时我是听懂了，应该也达到了能用的水平，无奈10月左右的时间，只剩下点滴印象了，*（唉，时光已去，曾经掌握的东西，当要用时，又需要重新去学，这正式自己写技术博客的原因之一）*

不多说了，接下来，将整体上对正则表达式来一个梳理。

##正则表达式，是什么？

正则表达式，英文原名: `Regular Expression`（简称：`regex`或`regexp`），直接翻译：`有规律的式子`，或者，可以翻译为`描述规律的式子`。*(他奶奶的，不知道谁第一个翻译的，取名`正则表达式`？忒高大上了，听上去完全不知到干什么的，还是`描述规律的式子`容易理解)*

###正则表达式，解决什么问题？

通俗的说：查找满足一定规则的字符串。

可用于文本的查找、替换。

###应用场景举例

1. 场景1：仅查找出文本中单次`car`，不想找出其他单次`scar`、`carry`等。
2. 场景2：用户在注册页面填写Email时，检查Email地址格式是否正确。
3. 场景3：查找制定目录下，文件名中包含`application`字样的文件。

###正式定义

正则表达式，给个正式定义：按一定规则查找字符串，并可以进行替换操作。

正则表达式，几点要注意的内容：

* 有自己的语法规则，即，正则表达式语言；
* 不是正规的（完备的）程序设计语言，没有专门针对正则表达式的软件来安装和运行；
* 常内置于其他软件/语言中；（即，其他语言实现了正则表达式规则的解析器）

###正则表达式，产生的启发点

1950年左右时，数学领域的一些研究工作

> [A logical calculus of the ideas immanent in nervous activity](http://cns-classes.bu.edu/cn550/Readings/mcculloch-pitts-43.pdf), 1943;
> Author: McCulloch, Warren S., and Walter Pitts;
> 简述：神经系统中神经元看作小巧而简单的自动控制单元。

> [Representation of Events in Nerve Nets and Finite Automata](http://www.dlsi.ua.es/~mlf/nnafmc/papers/kleene56representation.pdf), 1956
> Author: Kleene, Stephen C 
> 简述：“正则集合”的数学符号来描述此模型。

几年后，计算机领域借助研究成果，实现perl、grep等工具/语言，正则表达式进入实用阶段。

当前，java/Python/PHP/JavaScript/C#/Ruby，都支持正则表达式。具体请参考：[Applications and Languages Related with RegEx](http://www.regular-expressions.info/tools.html)

##怎么用？

###对1个字符匹配1次



###对1个字符匹配n次



###对n个字符匹配1次



###对n个字符匹配n次


###在特定位置匹配字符


###子表达式

前文提到过，在这儿单独拿出来说，是因为下文要用到。*（尼玛，下文难道不会用到前文其他内容么？凭什么单说子表达式啊；因为，实在是怕你忘了子表达式，其他内容你即使忘了，也容易自己查找）*

###引用回溯

本质：前后匹配一致；

技术上实质：后半部分引用前半部分匹配到的子表达式。




###前后查找

本质：匹配全部，返回局部；

技术上实质：将子表达式向前（后）匹配到字符串返回。

* 向前查找： 正 向前查找`exp2(?=exp1)`， 负 向前查找`(exp2(?!exp1))`；
* 向后查找： 正 向后查找`(?<=exp1)exp2`， 负 向后查找`(?<!exp1)exp2`；

注：上式都是匹配`exp1`，返回`exp2`。


###嵌入条件

可以添加逻辑条件，类似if


##八卦：正则表达式，怎么产生的？

（参考来源：正则表达式必知必会）

[NingG]:    http://ningg.github.com  "NingG"
