<!DOCTYPE html>
<html xmlns:wb="http://open.weibo.com/wb">
<head>
    <!--   Author: NingG   -->
    <meta charset="utf-8" />
	<meta property="wb:webmaster" content="7ea7f3d5f3edad6a" />
    <title>PHP内容梳理 | ningg.top</title>
    <meta name="author" content="NingG" />
    <meta name="renderer" content="webkit">
    <meta name="description" content=" WEB站点中，有一定比例都是PHP语言实现的后端逻辑，正好最近要用，快速入个门  " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="" />
	
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
	
    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">NingG</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/ggningg/" target="_blank" style="margin-left:-5px;"><img src="http://www.weibo.com/favicon.ico" alt="" width="25"/></a>
            <a href="http://www.douban.com/people/ggningg/" target="_blank" style="text-align:center;"><img src="http://www.douban.com/favicon.ico" alt="" width="22"/></a>
			<a href="http://github.com/ningg" alt="" target="_blank" style="text-align:right;"><img src="/images/icon-cube-smaller.png" width="22"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/php-intro" title="PHP内容梳理">PHP内容梳理</a></h1>
        <p class="entry-date">2014-08-31</p>
        <h2 id="section">背景</h2>

<p>最近要快速搭建一个网站，用途：实现团队内容的对外展现，第一反应就是用wordpress框架实现，号称5分钟建站，够快了。问题来了：网站要实现一些特定的效果，这个就需要定制一下了，wordpress后端是PHP写的处理逻辑，OK，熟悉一下PHP。<em>（实际上，半年前在baidu的时候，用过一段时间PHP，只不过没有整理，后来没继续使用，也忘得差不多了，就剩下学习方法和感觉了）</em></p>

<h2 id="section-1">学习路线</h2>

<p>自己之前接触过1个多月的PHP，当时的内容就是搭建web站点；针对一门不熟悉的语言，只需要掌握其基本知识即可开始工作，包括：</p>

<ul>
  <li>定义变量；</li>
  <li>不同数据结构对应的变量；（链表、集合）</li>
  <li>多个文件之间的组织结构；</li>
  <li>调试程序；</li>
</ul>

<h2 id="section-2">变量</h2>

<p>变量，就是存储数据的容器，对变量进行操作就是处理数据；</p>

<h3 id="section-3">定义变量</h3>

<p>变量名，几点：</p>

<ul>
  <li>变量名必须以<code>$</code>开头；</li>
  <li><code>$</code>之后，第一个字符必须为字母、下划线<code>_</code>，不能为数字；</li>
  <li>变量名剩余部分，可以包含任意字母、数字、下划线；</li>
  <li>变量名，区分大小写；</li>
</ul>

<p>关于变量名，建议：</p>

<ul>
  <li>变量名，全部小写字母；</li>
  <li>变量名，表示其含义，举例：<code>$first_name</code>好于<code>$fn</code>;</li>
  <li>注释变量用途，例：$first_name = ‘Guo’; //the first name</li>
  <li>保持一致命名模式，如果要大写，就全部大写；举例：预定义变量<code>$_SERVER</code>；</li>
</ul>

<p>变量定义，几点：</p>

<ul>
  <li>PHP是脚本语言，不要求必须先定义变量或者初始化变量；但为了规范开发、减少出错，建议先定义变量后使用；</li>
  <li>在定义时，对变量用途进行注释；</li>
  <li>变量命名风格，有两种：驼峰式（<code>$FirstName</code>）和下划线式（<code>$first_name</code>），建议下划线式。</li>
</ul>

<h3 id="section-4">变量类型</h3>

<p>这一部分，将介绍3种变量类型：数值型、字符串型和数组；</p>

<ul>
  <li>数值
    <ol>
      <li>整数：1、-1；</li>
      <li>浮点数：1.0、2.2；</li>
      <li>注：<code>1/3</code>包含<code>/</code>是错误表示；</li>
    </ol>
  </li>
  <li>字符串
    <ol>
      <li>单引号<code>'</code>、双引号<code>“</code>包含起来的任意符号；</li>
      <li>可以包含变量，例：<code>'$field_name'</code>；</li>
    </ol>
  </li>
  <li>数组
    <ol>
      <li>基本单元：key-value；</li>
      <li>key不同，数组分为两类：索引数组（key为数值）、关联数组（key为字符串）；</li>
      <li>数组的key，又称索引；</li>
      <li>如果数组的value也是数组，则，为多维数组；</li>
      <li>PHP中关联数组，在Perl和Ruby中称为散列；</li>
    </ol>
  </li>
</ul>

<p>索引数组如下：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">key</th>
      <th style="text-align: left">value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Don</td>
    </tr>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">Jane</td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left">Roger</td>
    </tr>
  </tbody>
</table>

<p>关联数组如下：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">key</th>
      <th style="text-align: left">value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">D</td>
      <td style="text-align: left">Don</td>
    </tr>
    <tr>
      <td style="text-align: left">J</td>
      <td style="text-align: left">Jane</td>
    </tr>
    <tr>
      <td style="text-align: left">R</td>
      <td style="text-align: left">Roger</td>
    </tr>
  </tbody>
</table>

<h3 id="section-5">变量赋值</h3>

<ul>
  <li>普通变量（数值、字符串）
    <ol>
      <li>等号赋值，例： $number = 1;</li>
    </ol>
  </li>
  <li>数组
    <ol>
      <li>使用array()函数，例：$list = array();</li>
    </ol>
  </li>
</ul>

<h3 id="section-6">使用变量</h3>

<ul>
  <li>直接输出变量
    <ul>
      <li>echo $number;</li>
      <li>print $number;</li>
    </ul>
  </li>
  <li>上下文中输出变量
    <ul>
      <li>echo “number is $number”;</li>
      <li>注：上述不能使用单引号<code>‘</code>，下文会提到；</li>
    </ul>
  </li>
  <li>数组
    <ul>
      <li>print_r “$_SERVER”;</li>
      <li>注：print “$_SERVER”; 结果是：<code>Array</code>;</li>
      <li>数组是非标量类型，还有其他输出方式；</li>
    </ul>
  </li>
</ul>

<p><strong>特别说明</strong>：打印出变量内容，是调试脚本的重要方法。</p>

<h3 id="section-7">引号说明</h3>

<p>这个比较重要，单拎出来说一下：</p>

<blockquote>
  <p>单引号<code>‘</code>内容，原样输出；双引号<code>”</code>内容，进行变量带入；</p>
</blockquote>

<p>针对引号，几点注意：</p>

<ul>
  <li>坚持使用双引号<code>"</code>即可解决大部分问题；</li>
  <li>当输出<code>\n</code>、<code>\t</code>时，需要使用双引号<code>"</code>；</li>
  <li>建议输出所有变量时，都使用双引号<code>"</code>；</li>
</ul>

<h3 id="section-8">预定义变量</h3>

<p>PHP中已经预先定义了一些变量，这些变量功能强大，需要熟记。</p>

<ul>
  <li>$_POST，数组，捕获POST方式表单数据；
    <ol>
      <li>使用键访问数组元素：<code>print $_POST['name_value']</code>;</li>
      <li>严格区分大小写，并且以<code>$_</code>开头，全部大写；</li>
      <li>双引号内部，不能使用数组的单引号来引用key；</li>
    </ol>
  </li>
</ul>

<p>针对上面 3. 中提到的情况，说明如下：</p>

<pre><code>// 下面输出会出错
print "Thank U : $_POST['name']";

// 可选解决办法（先取出，后使用）
$input_name_value = $_POST['name'];
print "Thank U : $input_name_value";
</code></pre>

<p>疑问：能使用双引号，即 <code>$_POST["name"]</code> 样式，来获取数组中内容吗？当然可以，单引号能做，双引号也能。</p>

<ul>
  <li>$_GET，捕获GET方式表单数据，与$_POST类似；</li>
  <li>$_REQUEST，捕获任意方式提交的数据；(不推荐)</li>
  <li>$_COOKIE，设置和查询当前cookie中信息；</li>
  <li>$_SERVER，服务器和执行环境信息；
    <ol>
      <li>‘PHP_SELF’：当前执行脚本的文件名，与document root有关，例如：<code>/test.php/foo.bar</code>，具体看PHP手册；</li>
      <li>‘REQUEST_METHOD’：访问页面的请求方法，例如：GET、POST、PUT；</li>
    </ol>
  </li>
</ul>

<h3 id="section-9">数组</h3>

<p><strong>操作数组</strong>：array()函数创建数组：</p>

<pre><code>$list = array ('appales', 'bananas', 'oranges');
</code></pre>

<p>默认，数组的索引从0开始；当然有办法从1开始，代码如下：</p>

<pre><code>$list = array(
	1 =&gt; 'apples',
	2 =&gt; 'bananas',
	3 =&gt; 'oranges'
);

//key值也可以为字符串
$list = array(
	'Mon' =&gt; 'apples',
	'Tue' =&gt; 'bananas',
	'Wed' =&gt; 'oranges'
);

//range () 函数创建数组
$evens = range (0, 100, 2);
</code></pre>

<p>关于数组的常用操作，小结如下：</p>

<ul>
  <li>创建数组
    <ol>
      <li><code>$list = array ()</code>;</li>
      <li><code>evens = array ()</code>;</li>
    </ol>
  </li>
  <li>输出数组
    <ol>
      <li><code>print_r()</code>函数</li>
      <li><code>var_dump()</code>函数</li>
      <li><code>foreach()</code></li>
    </ol>
  </li>
  <li>引用元素
    <ol>
      <li>只能通过key的引用来获取；</li>
      <li>key区分大小写；</li>
      <li>key是字符串的，通过$list[1]无法访问任何元素；</li>
    </ol>
  </li>
  <li>追加元素
    <ol>
      <li>数值索引时：	<code>$list[] = 'pears'</code>;</li>
      <li>字符串索引：必须指定key；</li>
    </ol>
  </li>
  <li>修改元素
    <ol>
      <li>数值索引：<code>$list[2] = 'pears'</code>;</li>
      <li>字符串索引：<code>$list['Wed'] = 'pears'</code>;</li>
      <li>字符串索引时，不能使用数值；</li>
    </ol>
  </li>
  <li>元素个数
    <ol>
      <li><code>$how_many = count($array)</code>;</li>
    </ol>
  </li>
  <li>删除元素
    <ol>
      <li><code>unset($list[1])</code>;</li>
      <li><code>unset($list['Wed'])</code>;</li>
      <li><code>unset($list)</code>;//删除整个数组</li>
      <li><code>$list = array()</code>;//等价于删除数组</li>
    </ol>
  </li>
  <li>合并数组
    <ol>
      <li><code>array_merge($list1， $list2)</code>;</li>
      <li><code>$list = $list1 + $list2</code>;</li>
    </ol>
  </li>
  <li>数组排序：会单独列张表
    <ol>
      <li><code>sort($array)</code>、<code>rsort()</code>；</li>
      <li><code>asort()</code>、<code>arsort()</code>;</li>
      <li><code>ksort()</code>、<code>krsort()</code>;</li>
      <li><code>shuffle()</code>：数组元素顺序随机重组；</li>
    </ol>
  </li>
  <li>字符串与数组间相互转换
    <ol>
      <li><code>implode()</code>：数组转换为字符串；</li>
      <li><code>explode()</code>：字符串转换为数组；</li>
    </ol>
  </li>
  <li>判断是否为数组
    <ol>
      <li><code>is_array($array)</code>;</li>
    </ol>
  </li>
  <li>额外几个函数
    <ol>
      <li><code>array_key_exists()</code></li>
      <li><code>array_search()</code></li>
      <li><code>in_array()</code></li>
    </ol>
  </li>
</ul>

<p>数组使用过程总结如下：</p>

<ul>
  <li>如果 $list 不存在，<code>$list[] = 'value'</code>，会去创建数组；</li>
  <li>数组中使用单引号 <code>'</code> 来引用 key 和 value，也可以使用双引号<code>"</code>；</li>
  <li><code>sizeof()</code> 函数是 <code>count()</code> 的别名，返回数组的元素个数；</li>
  <li>当key为数值、变量、常数时，不用引号引用，即可调用；</li>
</ul>

<p>特别要说的是foreach遍历数组，举例如下：</p>

<pre><code>//同时，使用key 和value
foreach($array as $key =&gt; $value) {
	print "&lt;p&gt;Key is $key. Value is $value. &lt;/p&gt;";
}

//只使用value
foreach($array as $value){
	print "&lt;p&gt;Value is $value.&lt;/p&gt;";
}

//对于数值索引数组
for($n = 0; $n &lt; count($array); $n++){
	print "&lt;p&gt;Value is $array[$n].&lt;/p&gt;";
}
</code></pre>

<p>备注：上述<code>$key =&gt; $value</code>，可以替换为<code>$k =&gt; $v</code>等类似形式。</p>

<p><strong>多维数组</strong></p>

<pre><code>$fruits = array (
	1 =&gt; 'apples',
	2 =&gt; 'bananas',
	3 =&gt; 'oranges'
);

$meats =array (
	'fruits' =&gt; $fruits,
	'other' =&gt; 'peanuts',
	'cash' =&gt; 30.00
);
</code></pre>

<p>数组排序，常用函数如下：</p>

<table>
  <thead>
    <tr>
      <th>函数</th>
      <th>排序依据</th>
      <th>是否保持key-value对应关系</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sort()</td>
      <td>Values</td>
      <td>No</td>
    </tr>
    <tr>
      <td>rsort()</td>
      <td>Values</td>
      <td>No</td>
    </tr>
    <tr>
      <td>asort()</td>
      <td>Values</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>arsort()</td>
      <td>Values</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>ksort()</td>
      <td>Keys</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>krsort()</td>
      <td>Keys</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>natsort()</td>
      <td>Keys，自然顺序</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>natcasesort()</td>
      <td>Keys</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<p>字符串与数组之间转换，通常如下原因：</p>

<ul>
  <li>数组-&gt;字符串，为了在URL中传输数组；</li>
  <li>数组-&gt;字符串，方便将数组存储到数据库；</li>
  <li>字符串-&gt;数组，逗号分割的文本，转化为相互独立形式；</li>
</ul>

<p>数组与字符串间转换实例：</p>

<pre><code>// 将array以','为分割，转换为字符串
$string = implode(',', $array);

//将string以','为分割，转换为数组
$array = explode(',', $string);
</code></pre>

<p>将数组中元素分别指定给不同变量，使用 list() 函数：</p>

<pre><code>$date = array('Thursday', 23, 'October');
//为3个变量赋值
list($weekday, $day, $month) = $date;
</code></pre>

<p>实践：查看PHP手册中的几个函数，<code>array_key_exists()</code>、<code>array_search()</code>、<code>in_array()</code>。</p>

<h2 id="section-10">常量</h2>

<p>与变量不同，常量在脚本的执行过程中，一直保持初始值；常量一旦设定就不能更改。</p>

<h3 id="section-11">定义常量</h3>

<p>使用define()函数</p>

<pre><code>define('CONSTANT_NAME', value);
</code></pre>

<p>几点：</p>

<ul>
  <li>常量名，以字母、下划线开头，全部大写；</li>
  <li>常量名，不需要以<code>$</code>开头；</li>
  <li>定义常量，define()中常量名，使用引号；</li>
  <li>输出常量，直接使用常量名即可；</li>
  <li>引号内部（单引号、双引号）无法输出常量；</li>
  <li>判断是否定义常量：<code>defined('CONSTANT_NAME')</code>；</li>
  <li>常量是全局作用域的；</li>
  <li>常量的值不能修改，常量本身也不能修改；</li>
</ul>

<h3 id="section-12">预定义常量</h3>

<ul>
  <li>PHP_VERSION：正在运行的PHP版本</li>
  <li>PHP_OS：服务器操作系统</li>
  <li>SID：session ID</li>
</ul>

<h2 id="section-13">运算符</h2>

<p>PHP中运算符，参考下表：</p>

<table>
  <thead>
    <tr>
      <th>运算符</th>
      <th>用法</th>
      <th>类型</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>+</code></td>
      <td>加</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>-</code></td>
      <td>减</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>*</code></td>
      <td>乘</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>/</code></td>
      <td>除</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>%</code></td>
      <td>取模</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>++</code></td>
      <td>自增</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>--</code></td>
      <td>自减</td>
      <td>算数</td>
    </tr>
    <tr>
      <td><code>=</code></td>
      <td>赋值</td>
      <td>赋值</td>
    </tr>
    <tr>
      <td><code>==</code></td>
      <td>相等</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>!=</code></td>
      <td>不等</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>&lt;</code></td>
      <td>小于</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>&gt;</code></td>
      <td>大于</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>&lt;=</code></td>
      <td>小于等于</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>&gt;=</code></td>
      <td>大于等于</td>
      <td>比较</td>
    </tr>
    <tr>
      <td><code>!</code></td>
      <td>非</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>AND</code></td>
      <td>与</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>&amp;&amp;</code></td>
      <td>与</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>OR</code></td>
      <td>或</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>||</code></td>
      <td>或</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>XOR</code></td>
      <td>异或</td>
      <td>逻辑</td>
    </tr>
    <tr>
      <td><code>.</code></td>
      <td>连接</td>
      <td>字符串</td>
    </tr>
  </tbody>
</table>

<h2 id="section-14">函数</h2>

<p>特别说明：PHP中函数名与<code>()</code>之间可以有空格，即，如下两种方式都正确：</p>

<pre><code>round(100.2);
round (100.2);
</code></pre>

<h3 id="section-15">数值格式化</h3>

<p>round()，进行数值四舍五入，具体参阅[PHP Manual]，举例如下：</p>

<pre><code>&lt;?php
	round(3.4);			//3
	round(4.12, 1);		//4.1
	round(1221, -2);	//1200
?&gt;
</code></pre>

<p>类似函数还有：<code>number_format()</code>、<code>printf()</code>、<code>sprintf()</code>；</p>

<h3 id="section-16">随机数</h3>

<p><code>rand()</code>、<code>mt_rand()</code>，具体不多说，查看操作手册即可；</p>

<h3 id="section-17">字符串连接</h3>

<p>字符串连接：句点<code>.</code>，举例：<code>$result = $first_name . $last_name</code>;</p>

<h3 id="html">转换HTML格式</h3>

<ul>
  <li>nl2br($string);		//将$string内的\n转换为<br /></li>
  <li>htmlsprcialchars();	//将特定的HTML标签转换为实体版本</li>
  <li>htmlentities();		//将所有的HTML标签转换为实体版本</li>
  <li>strip_tags();		//移除所有HTML和PHP标签</li>
  <li>html_entity_decode();	//将HTML实体转换为相应HTML代码</li>
  <li>wordwrap();			//按照指定长度，换行处理字符串</li>
</ul>

<p>几个问题：</p>

<ul>
  <li>HTML实体是什么？例如：<code>&lt;</code> 对应HTML实体为 <code>&amp;lt;</code> ；使用HTML实体主要原因：防止输入文本中包含HTML标签，打乱整个页面的布局，更近一步，防止用户提交JS进行跨站点攻击（XSS，Cross-Site Scripting）。补充：XSS 能够做的事情：破环网站风格、功能；盗取浏览用户的session信息。</li>
  <li>通常先移除所有HTML、PHP标签，再将<code>\n</code>等转义符，转换为HTML换行符，即：<code>strip_tags()</code> 之后 <code>nl2br()</code> ;</li>
</ul>

<h3 id="section-18">字符串编/解码</h3>

<p>背景：通过URL的query向服务器发送参数时，要求参数不能包含空格、特殊字符等；如果一定要使用URL的query向服务器传送数据，可以先对数据进行编码，即可解决此问题。</p>

<p><code>urlencode()</code>，专门解决这一问题，将字符串转换为适合最为URL的一部分来传输。几点说明：</p>

<ul>
  <li>表单发送出去的数据，会自动进行URL编码，在服务器端，会自动解码，因此，本例中，只需要在页面上通过 <code>urlencode()</code> 编码即可，服务器能够自动解码；</li>
  <li><code>urldecode()</code>，能够进行解码，但不常用，因为服务器能够自动解码；</li>
</ul>

<h3 id="section-19">子字符串</h3>

<ul>
  <li><code>strtok($string, $token)</code>，按照$token来分割$string，并返回最新的子串；</li>
  <li><code>substring($string, 0, 10)</code>，从$string中索引为0的字符开始（包含在内），累计截取10个字符；</li>
  <li><code>substring($string, -3, 3)</code>，从$string中倒数第3个字符开始（包含在内），累计截取3个字符；</li>
  <li><code>strlen($string)</code>，字符串中字符个数；</li>
  <li><code>str_word_count()</code>，字符串中单词个数；</li>
  <li><code>str_ireplace($needle, $replacement, $haystack)</code>，将$haystack中$needle替换为$replacement；</li>
  <li><code>str_replace()</code>，区分大小写，其余与str_ireplace()类似；</li>
  <li><code>trim()</code>，删除字符串首尾的空格、换行符、制表符；</li>
  <li><code>rtrim()</code>，删除最右端的空白字符；</li>
  <li><code>ltrim()</code>，删除最左端的空白字符；</li>
  <li><code>strtoupper()</code>，字符串转换为大写；</li>
  <li><code>strtolower()</code>，字符串转换为小写；</li>
  <li><code>substr_count($string, $substr)</code>，子字符串出现的次数；</li>
</ul>

<p>PHP中所有索引的位置都是从0开始的。</p>

<ul>
  <li>$evens = range (0, 100, 2); 创建等差数列；</li>
</ul>

<h3 id="section-20">日期和时间</h3>

<p>说几个函数，有点印象就行，具体用法去查PHP手册：</p>

<ul>
  <li><code>date()</code> 返回某一日期格式；</li>
  <li><code>date()</code> 中第二参数为时间戳（timestamp），是表示从1970年1月1日算起的秒数；</li>
  <li><code>time()</code> 返回当前时间戳；</li>
  <li><code>mktime()</code> 返回一个给定日期和时间对应的时间戳；</li>
  <li><code>date_default_timezone_set()</code> 设置时间默认的时区；</li>
  <li><code>date_default_timezone_get()</code> 获取当前时间对应的时区；</li>
</ul>

<p>额外说明几点：</p>

<ul>
  <li>PHP是服务器端的技术，函数反映的是服务器上的时间，如果要获取客户端的时间，需要使用JavaScript；</li>
  <li>PHP 5.3中，加入一个创建、操作日期和时间的类：DateTime类；</li>
</ul>

<h3 id="section-21">创建函数</h3>

<p>一个典型函数的格式如下：</p>

<pre><code>//设置参数默认值
function function_name($arg1 = 'world', $arg2){
	statements;
	//函数的返回值（返回多个值：数组）
	return $name;
}
</code></pre>

<p>说几点：</p>

<ul>
  <li>函数名，不区分大小写；</li>
  <li>函数function_exists(function_name)，用于判断一个函数是否存在；</li>
  <li>PHP中不要求：函数在调用之前就定义好，但，推荐在脚本开头就定义好函数；（放在引入文件中）</li>
</ul>

<h3 id="section-22">变量作用域</h3>

<ul>
  <li>通常，变量作用域：整个脚本的声明周期中；</li>
  <li>函数中传参数时，传递变量值，而不传递变量本身；</li>
  <li>函数内部定义的变量，为局部变量；</li>
  <li>global可以将函数内局部变量设置为全局变量；</li>
</ul>

<h2 id="section-23">控制结构</h2>

<p>几点注意：</p>

<ul>
  <li><code>{</code>、<code>}</code>的前后，不能出现<code>;</code>，否则报错；</li>
</ul>

<p>几个验证函数：</p>

<ul>
  <li><code>empty()</code>，除去变量未定义、值为0、空字符串外，返回FALSE;</li>
  <li><code>isset()</code>，仅当变量未定义时，返回False；（能够接受任意个数的变量）</li>
  <li><code>is_numeric()</code>，仅当变量为数值时，返回TRUE;</li>
  <li><code>checkdate()</code>，验证日期是否存在；</li>
  <li><code>is_array()</code>，判断是否数组；</li>
</ul>

<p>举例如下：</p>

<pre><code>$var1 = 0;
$var2 = "";
$var3 = "HELLO!"

empty($var);	//TRUE，没有定义的变量
empty($var1);	//TRUE，空值
empty($var2);	//TRUE，空值
empty($var3);	//FALSE，非空（这个是这样吗？）

isset($var);	//FALSE，变量未定义
isset($var1);	//TRUE
isset($var2);	//TRUE
</code></pre>

<h3 id="if">if条件语句</h3>

<pre><code>if (condition1) {
	statement(s);
} elseif (condition2) {
	statement(s);
} else {
	statements(s);
}
</code></pre>

<h3 id="switch">switch条件语句</h3>

<p>switch($var)，变量$var，可以为字符串、数值，在case后的value，如果是数值，则不需要加引号。</p>

<pre><code>switch ($var) {
	case value1:
		statements1;
		break;
	case value2:
		statements2;
		break;
	default:
		statements3;
		break;
}
</code></pre>

<h3 id="section-24">循环语句</h3>

<p>主要是for、while，以及foreach，不多说，给个示例：</p>

<pre><code>while(condition) {
	statement(s);
}

do {
	statement(s);
} while (condition);

for (init_exp; condition ; closing_exp){
	statement(s);
}
</code></pre>

<h2 id="section-25">调试程序</h2>

<p>调试程序有2种方式：</p>

<ol>
  <li>输出变量和错误信息；</li>
  <li>用IDE，打断点，debug；</li>
  <li>查看程序运行日志，特别是出错日志；</li>
</ol>

<h3 id="section-26">输出变量</h3>

<ul>
  <li>echo “$var”;</li>
  <li>print “$var”;</li>
  <li>print_r “$_SERVER”;</li>
</ul>

<h3 id="section-27">输出错误信息</h3>

<p>安装PHP之后，默认安全配置下，是不允许向Web端输出任何出错信息的，即，<code>display_errors</code> 出于关闭状态；为了方便调试，有两种方法：</p>

<ul>
  <li>开启 <code>display_errors</code> 设置；</li>
  <li>为某些脚本单独开启 <code>display_errors</code> 设置；</li>
</ul>

<p>当前首选第一个选项，但是只有root用户才有如此权限；普通用户，可以在php页面中添加代码：<code>ini_set('display_errors', 1);</code> 实现为某些脚本开启 <code>display_errors</code> 。说明：这种方式进行的设置，只在当前php脚本执行期间有效，脚本结束后恢复原始设置；<code>display_errors</code> 只能控制是否向浏览器发送错误信息，而不会控制错误的发生。</p>

<h3 id="section-28">输出错误信息级别</h3>

<p>通过设置display_errors可以实现输出错误信息，但是要输出哪一类的错误信息呢？警告信息要不要输出？</p>

<p>PHP中错误的类型，见下表：</p>

<table>
  <thead>
    <tr>
      <th>类型</th>
      <th>描述</th>
      <th>示例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>通知</td>
      <td>非致命性错误，程序不一定有问题</td>
      <td>引用一个没有值的变量</td>
    </tr>
    <tr>
      <td>警告</td>
      <td>非致命错误，程序有问题</td>
      <td>函数误用</td>
    </tr>
    <tr>
      <td>解析错误</td>
      <td>致命错误，语法错误</td>
      <td>缺少分好、引号、圆括号、花括号</td>
    </tr>
    <tr>
      <td>错误</td>
      <td>致命错误，一般错误</td>
      <td>内存分配问题</td>
    </tr>
  </tbody>
</table>

<p>错误报告常量（不完整，完整版查看[PHP Manual]），见下表：</p>

<table>
  <thead>
    <tr>
      <th>名称</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>E_NOTICE</td>
      <td>通知</td>
    </tr>
    <tr>
      <td>E_WARRING</td>
      <td>警告</td>
    </tr>
    <tr>
      <td>E_PARSE</td>
      <td>解析错误</td>
    </tr>
    <tr>
      <td>E_ERROR</td>
      <td>错误</td>
    </tr>
    <tr>
      <td>E_ALL</td>
      <td>所有错误（E_STRICT除外）</td>
    </tr>
    <tr>
      <td>E_STRICT</td>
      <td>PHP代码修改建议</td>
    </tr>
  </tbody>
</table>

<p>注：上面的常量，是二进制位掩码，可以使用按位运算符来对其进行组合，例如，php.ini中，<code>|</code>、<code>~</code>、<code>&amp;</code>；</p>

<p>两种方式可以设置错误提示级别：</p>

<ol>
  <li>全局设置：PHP配置文件php.ini中，调整error_reporting()级别；</li>
  <li>局部设置：php脚本中，使用error_reporting()函数；</li>
</ol>

<p>举例说明如下：</p>

<pre><code>//不报告任何错误
error_reporting(0);

//报告所有错误
error_reporting(E_ALL);

//报告除通知之外的所有错误
error_reporting(E_ALL &amp; ~E_NOTICE);

//所有错误以及代码修改建议
error_reporting(E_ALL | E_STRICT);
</code></pre>

<h2 id="web">Web开发基本过程</h2>

<p>Web开发的基本过程：</p>

<ul>
  <li>创建模版HTML文件；</li>
  <li>从模版中抽取：页头文件、页脚文件；</li>
  <li>将页头、页脚文件导入php主文件中；
    <ol>
      <li><code>include('file.php');</code> 若include()函数失败，发出警告；</li>
      <li><code>require('file.php');</code> 若require()函数失败，终止脚本；</li>
    </ol>
  </li>
  <li>通常两个php脚本来处理表单：一个显示表单，一个接收和处理表单数据；
    <ol>
      <li>让同一个脚本来完成整个流程更好；</li>
      <li>检查变量是否设置：<code>isset($_POST['something'])；</code></li>
      <li>检查表单提交的方法：<code>$_SERVER['REQUEST_METHOD'] == 'POST'</code>;</li>
    </ol>
  </li>
  <li>表单粘性：若表单提交后出错，则，重新提交表单，希望能够记录初次填写的表单数值；
    <ol>
      <li>&lt;input … value=”<?php print $_POST['name']; ?>” /&gt;</li>
      <li>不要引用不存在的变量；在引用之前，判断是否存在isset()</li>
      <li>用户提交的内容，直接显示在表单中有样式问题，可以使用htmlspecialchars()；</li>
    </ol>
  </li>
  <li>发送Email
    <ol>
      <li>服务器上Email应用程序发送Email；</li>
      <li>具体：调用函数<code>mail(to, subject, body)</code>;</li>
      <li><code>substr_count($_POST['eamil'], '@') == 1</code>，邮件验证；</li>
    </ol>
  </li>
  <li>输出缓冲，只能在服务器发出响应之前进行调用：
    <ol>
      <li>header()：</li>
      <li>setcookie()：</li>
      <li>session_start()：</li>
      <li>ob_start()；开启输出缓存，output buffering；</li>
      <li>ob_end_flush()；输出缓冲数据；</li>
      <li>ob_end_clean()；删除缓冲数据，不进行传输；</li>
      <li>php.ini中可设置输出缓冲区的大写；</li>
      <li>ob_get_length()；当前输出缓冲区的大小；</li>
      <li>ob_get_contents()；获取缓冲区内容；</li>
      <li>ob_flush()；输出当前缓冲区内容，以方便继续缓冲新内容；</li>
      <li>ob_clean()；清空缓冲区内容，但后续仍会继续缓冲；</li>
    </ol>
  </li>
  <li>HTTP头，header()函数
    <ol>
      <li>重定向：header(‘Location: index.php’);</li>
      <li>重定向，接着使用函数，exit()；</li>
      <li>开启输出缓存：ob_start()；</li>
      <li>如果浏览器已经收到HTTP头，则headers_sent()函数返回TRUE；</li>
    </ol>
  </li>
</ul>

<h3 id="cookiesession">cookie和session</h3>

<p>cookie、session的作用：跟踪用户，记录用户信息。</p>

<p><strong>什么是cookie</strong></p>

<p>客户端保存用户信息的一种方式，服务器通过此信息识别用户身份；将从几点来介绍cookie：</p>

<ul>
  <li>建立cookie；</li>
  <li>从cookie中检索信息；</li>
  <li>删除cookie；</li>
  <li>限制cookie的可选参数；</li>
  <li>如何调试与cookie相关的问题；</li>
  <li>如何传输和接收cookie；</li>
</ul>

<p>cookie的访问时间和方式：用户输入URL后，浏览器会将cookie信息包含至HTTP请求内发送给服务器。额外几点说明：</p>

<ul>
  <li>服务器端的PHP和浏览器端的JavaScript都能发送、读取、删除cookie，这是两种脚本重叠的功能之一；</li>
  <li>cookie必须在服务器发送任何信息之前，从服务器发送到客户端；</li>
  <li>setcookie(name, value)函数，向浏览器发送cookie；</li>
  <li>发送cookie，应位于整个HTML页面标签之前（&lt;!DOCTYPE html … &gt;）；</li>
  <li>若使用输出缓存机制（output buffering），则setcookie()可以位于PHP脚本中任意位置；</li>
  <li>cookie的总数，限制在4KB；</li>
  <li>headers_sent()函数可用与测试HTTP头部是否发送出去；</li>
  <li>cookie的值在发送时，将自动编码，接收时会自动解码；对于PHP表单发送的值也是如此；</li>
  <li>setcookie()函数在不同的浏览器中，有兼容性问题；</li>
</ul>

<p><strong>读取cookie</strong></p>

<p>预定义的数组$_COOKIE中存储了所有cookie数据，按照key值，从数组$_COOKIE中读取即可。</p>

<p><strong>向cookie中添加参数</strong></p>

<p>函数setcookie()，具体用法如下：</p>

<pre><code>//expiration：过期时间点，单位秒(s)；默认关闭浏览器之前有效；
//domain：设置一个子域的cookie；
//secure：为1时，表示只能通过https传送；
//httponly：设置防止JS读取cookie，但不是所有浏览器都支持；
setcookie(name, value, expiration, path, domain, secure, httponly);

setcookie(name, value, time() + 3600)；
setcookie(name, value, time() + 3600, '/subfolder/');
setcookie(name, value, time() + 3600, '', 'forum.example.com');
</code></pre>

<p>几点注意：</p>

<ul>
  <li>cookie过期时间的选择：
    <ol>
      <li>cookie持续时间如果同用户浏览网站的时间一样长，则，不需要设置过期时间；</li>
      <li>如果需要cookie在关闭、重启浏览器之后继续存在，可将过期时间设置为数个月；</li>
      <li>若cookie可能引发安全隐患，则可将过期时间设置为小于1h；</li>
      <li>出于安全考虑，可以设定cookie过期时间为5min~10min，同时，让用户每访问一个新页面时，重新发送一次cookie；</li>
    </ol>
  </li>
</ul>

<p><strong>删除cookie</strong></p>

<p>删除cookie，本质就是设置一个空值，同时可以设置一个过去的过期时间：</p>

<pre><code>//重设值，同时设置过去的过期时间
setcookie('username', FALSE, time() - 600);
</code></pre>

<p>特别提醒：删除cookie时，一定要使用与设置cookie一致的参数（除去值和过期时间）。</p>

<pre><code>setcookie('user', 'larry', time() + 3600, '', 'forums.example.com');
setcookie('user', '', time() - 600, '', 'forums.example.com');
</code></pre>

<p><strong>什么是session</strong></p>

<p>session的数据保存在服务器端，cookie数据保存在客户端；由此，session比cookie拥有更多的优势：</p>

<ul>
  <li>session通常更安全，因为数据不会在客户端、浏览器之间重复传输；</li>
  <li>session存储比cookie更多的信息；</li>
  <li>session能够在禁止cookie的浏览器上，继续工作；</li>
</ul>

<p>几点说明：</p>

<ul>
  <li>开启一个session时，PHP会自动创建一个随机的session ID；</li>
  <li>每个用户都拥有一个自己的Session ID，这也是服务器上存储该用户session数据的文件名称；</li>
</ul>

<p>cookie相对于session的优势有：</p>

<ul>
  <li>cookie相对容易创建和使用；</li>
  <li>cookie耗费服务端的资源少；</li>
  <li>如果希望长期保存用户身份信息，则应采用cookie；</li>
</ul>

<p>结论：</p>

<ul>
  <li>当保存数据较少，同时安全性要求不高时，推荐首选cookie；</li>
  <li>保存数据较多或者敏感，同时安全性要求较高时，首选session；</li>
</ul>

<p><strong>创建session</strong></p>

<p>session_start()函数用于创建一个session，并且在session首次启动时发送一个cookie，因此，必须在所有HTML响应发送回浏览器之前，创建session。
第一次开启session时，随机产生一个session ID，并向Web浏览器发送一个名为PHPSESSID（session的名称）的cookie。</p>

<p>一旦启用session，就可以通过向数组赋值的方式来存储数据：</p>

<pre><code>$_SESSION['first_name'] = 'Sam';
$_SESSION['age'] = 14；
</code></pre>

<p>每次向session中添加数据时，PHP将向服务器上一个临时文件中添加一些数据：</p>

<pre><code>//session数据在服务器文件中的存储方式
email|s:14:"me@example.com"; loggedin|i:1292;
</code></pre>

<p>关于session几点信息：</p>

<ol>
  <li>php.ini中可以配置session信息；</li>
  <li>ini_set()函数可以设置session信息；</li>
  <li>session_name()函数可以修改session名称（默认名称PHPSESSID），注意：必须在调用session_start()之前使用；</li>
  <li>session_set_cookie_params()函数，用户修改session cookie的设置（过期时间、路径、域）；</li>
  <li>常量SID用格式name=ID的方式保存一个字符串；</li>
  <li>session中可以保存任意类型数据，甚至对象；</li>
  <li>在session中，数据都会以纯文本的形式保存在一个开放可读的文本文件中；永远不要将真实的敏感信息存在session中，例如信用卡数据；</li>
  <li>为提高安全性，可以将数据加密后保存到session中，在读取session后再解密（Mcrypt库）；</li>
</ol>

<p><strong>删除session</strong></p>

<p>服务器端session中包含的数据都保存在$_SESSION数组中，可以对数组重新赋值，以达到删除session的效果，但也需要删除服务器上保存session数据的临时文件，具体操作如下：</p>

<pre><code>//重置session
$_SESSION = array();
//删除服务器端session临时文件
session_destroy();
</code></pre>

<p>函数unset($var)，可用于删除一个变量，也能达到删除$_SESSION的效果；同时，如果浏览器禁用cookie，则可以在URL上添加session ID作为附属参数，以继续使用session，注意：需要在php.ini中启用enable_trans_side。</p>

<h3 id="section-29">文件和目录</h3>

<p>Web应用程序，不可避免两个问题：数据存储、检索数据。当前数据存储的方法主要有两种：文件（和目录）、数据库。这一部分，主要介绍一下文件的写入、读取和锁定。</p>

<p>疑问：读取、上传的文件，为什么在Web目录之外？</p>

<ul>
  <li>file_exists(‘somefile.ext’)，判断文件是否存在；</li>
  <li>is_readable()测试文件是否可读；</li>
  <li>touch(‘somefile.ext’)，创建空白文件；</li>
  <li>chgrp()、chown()、chmod()，修改文件、目录权限；</li>
  <li>file_put_contents($file, $data)，向文件写入数据；
    <ol>
      <li>文件不存在，则，函数主动创建；</li>
      <li>文件存在，覆盖文件内容；</li>
      <li>file_put_contents($file, $data, FILE_APPEND)，追加；</li>
      <li>如果需要追加的内容独占一行，则需要在内容后，添加换行符，PHP专用常量 PHP_EOL 可以解决这一问题，file_put_contents($file, $data . PHP_EOL, FILE_APPEND)</li>
    </ol>
  </li>
  <li>file_put_contents($file, $data, LOCK_EX);写文件同时锁定文件；
    <ol>
      <li>若同时追加文件、锁定文件，则，<code>LOCK_EX | FILE_APPEND</code>；</li>
    </ol>
  </li>
  <li>file_get_contents($file)，一次读取文件所有内容；</li>
  <li>file($file)，读取文件内容，并且返回一个数组，每个元素为原文件中的一行；</li>
  <li>更多文件读取方式：fgets()、fgetcsv()；</li>
  <li>filesize($file)，返回文件大小（单位Byte）；</li>
  <li>filetime($file)，返回文件修改时间戳，可使用date()格式化；</li>
  <li>is_writeable()</li>
  <li>is_readable()</li>
  <li>is_dir()</li>
  <li>is_file()</li>
  <li>glob()，搜索名字与模式匹配的文件（*.jpg）</li>
  <li>fileperms()，文件权限；</li>
  <li>fileatime()，文件最后访问时间；</li>
  <li>fileowner()，拥有该文件的用户名称；</li>
  <li>basename()、dirname()，返回文件名、路径名；</li>
  <li>finfo_file()，文件的MIME类型；</li>
  <li>mkdir(‘dir_name’, permissions)，创建文件；</li>
  <li>rmdir()，删除现有目录；</li>
  <li>fgets()，返回指定长度的字符串；</li>
  <li>feof()，判断是否达到文件末尾；</li>
</ul>

<p>补充几点：</p>

<p><strong>读取文件</strong>：PHP 4 以及以下版本，不能使用file_put_contents()，需要按照旧方法来写数据：打开文件、写数据、关闭文件；</p>

<pre><code>//文件模式mode，查PHP手册很详细
$file_pointer = fopen($file, mode);
fwrite($file_pointer, $data . PHP_EOL);
fclose($file_pointer);
</code></pre>

<p><strong>上传文件</strong>：通过表单上传，修改3处：</p>

<ol>
  <li>form表单添加enctype，即 &lt;form action=… enctype=”multipart/form-data” method=”post” &gt;；必须使用POST方式；</li>
  <li>添加银行输入框：<input type="hidden" name="MAX_FILE_SIZE" value="30000" />，用于建议浏览器最大能够上传的文件；</li>
  <li>使用file元素，创建所需的表单：<input type="file" name="pic" />，file类型允许用户上传一个文件；</li>
</ol>

<p>PHP脚本中，使用$_FILES变量能够引用上传的文件。$_FILES数组包含5个成员：</p>

<ol>
  <li>name，用户上传文件的原始名字；</li>
  <li>type，文件MIME类型，例：image/jpg；</li>
  <li>size，文件大小（单位Byte）</li>
  <li>tmp_name，文件存放在服务器上的临时文件名称；</li>
  <li>error，发生错误时，保存的错误代码；（查看PHP手册）</li>
</ol>

<p>文件上传之后，需要将临时文件移动到最终目标位置：</p>

<pre><code>//将临时文件移动到最终位置
move_uploaded_file($_FILES['pic']['tmp_name'], '/path/filename');
</code></pre>

<p>一个php脚本可以同时处理多个文件上传，只要name属性不同即可，此时只需要一个隐含输入框设定MAX_FILE_SIZE。另外，针对移动文件的函数小结：</p>

<ul>
  <li>move_uplodaded_file()，将上传的临时文件移动到最终位置；</li>
  <li>unlink()，删除文件，不会进行移动或者复制；</li>
  <li>copy()，复制文件；</li>
</ul>

<p>上传文件时，有几点注意：</p>

<ol>
  <li>php.ini中，开启file_uploads配置；</li>
  <li>php.ini中，设置upload_tmp_dir，如果没有设置，可能会指定一个隐含值；</li>
  <li>php.ini中，upload_max_filesize和post_max_size用于设定PHP能够处理的文件大小；</li>
  <li>form中隐含input元素中设定的MAX_FILE_SIZE只是在前端浏览器处，进行的约束；</li>
  <li>当缺失要上传大文件时，除了上述相关的配置，还应设置两个参数：memory_limit、max_execution_time，来给PHP脚本足够的处理时间和空间；</li>
</ol>

<p><strong>目录相关</strong></p>

<p>浏览目录：</p>

<ul>
  <li>scandir($dir)，返回目录下所有内容，一个数组：包含文件和子目录；</li>
  <li>旧版本的PHP中，需要使用opendir()、readdir()、closedir()；</li>
</ul>

<h3 id="mysql">数据库MySQL</h3>

<p>PHP中操作MySQL数据库，基本过程，连接数据库、操作、释放连接，具体几点：</p>

<ul>
  <li>$dbc = mysql_connect(hostname, username, passwd)，获取数据库连接</li>
  <li>mysql_query($query, $dbc)</li>
  <li>mysql_query(‘create database somedb’, $dbc);</li>
  <li>mysql_select_db(‘somedb’, $dbc);</li>
  <li>$result = mysql_query($query, $dbc)， 执行$query</li>
  <li>mysql_num_rows($result)，返回查询结果的个数，可用于删除、查询之前判断？</li>
  <li>$row = mysql_fetch_array($result)，每次返回一行数据，形式：数组；</li>
  <li>mysql_fetch_array($result, MYSQL_ASSOC or MYSQL_NUM)，关联数组、索引数组；</li>
  <li>while( $row = mysql_fetch_array($result) ){ … }，用于遍历结果；</li>
  <li>mysql_affected_rows()，返回INSERT、DELETE、UPDATE等影响到的行数；</li>
  <li>msyql_close($dbc)，释放连接</li>
</ul>

<p><strong>PHP中对MySQL的支持</strong></p>

<p>PHP操作MySQL，根据扩展不同，分为两类：</p>

<ul>
  <li>标准MySQL，支持所有MySQL版本，函数以 <code>mysql_</code> 作为前缀；</li>
  <li>扩展MySQL，MySQLi（Improved MySQL Extension），PHP5之后引入的，支持MySQL4.1以上的版本，能够利用MySQL的一些额外特性，函数以 <code>mysqli_</code> 最为前缀；</li>
</ul>

<p><strong>MySQL错误处理</strong></p>

<p>常见的错误类型有：</p>

<ul>
  <li>连接MySQL失败；</li>
  <li>选择数据库失败；</li>
  <li>无法运行查询；</li>
  <li>查询没有返回结果；</li>
  <li>数据没有插入到表中；</li>
</ul>

<p>具体说几点：</p>

<ul>
  <li>mysql_error()，显示发生错误的详细信息；</li>
  <li>错误控制符<code>@</code>，在函数名之前使用，阻止显示错误信息，但并不能阻止错误的发生，仅当希望自己处理错误时，才使用<code>@</code>；</li>
  <li>错误控制符<code>@</code>，可以用于阻止任何函数的错误、通知、警告，而不仅限于MySQL相关函数；</li>
</ul>

<p>关于PHP中使用MySQL，具体说几点：</p>

<p>为避免SQL注入攻击，可随意用mysql_real_escape_string()函数，来转义危险字符：</p>

<pre><code>$var = mysql_real_escape_string($var, $dbc);
</code></pre>

<p>注意几点：</p>

<ul>
  <li>所有文件编码方式需要与HTML中指定的charset一致；</li>
  <li>如果为UTF-8编码方式，则，必须为UTF-8 without BOM方式；</li>
  <li>通过include(‘path/file.php’)，路径为相对与最终php脚本的位置；</li>
  <li>include_once()、require_once()，表示同一个文件只包含一次；</li>
</ul>

<p><strong>特别说明</strong></p>

<p><a href="/download/php-intro/PHP基础教程（第4版）.pdf">PHP基础教程（第4版）</a>的附录部分，有很多进一步学习的建议。</p>

<h2 id="section-30">参考资料</h2>

<ul>
  <li><a href="/download/php-intro/PHP基础教程（第4版）.pdf">PHP基础教程（第4版）</a></li>
  <li><a href="/download/php-intro/php_enhanced_zh.chm">PHP Manual</a></li>
</ul>



        <div id="disqus_container">
            <div style="margin-bottom:20px" class="right">
				<wb:share-button appkey="2306590132" addition="simple" type="button" ralateUid="2356527183"></wb:share-button>
            </div>
            <!--<a href="#" class="comment" onclick="return false;">点击查看评论</a>-->
            <div id="disqus_thread"></div>
        </div>
    </div>

	
    <div class="sidenav">
		<iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=2356527183&verifier=1ccfb61e&colors=d6f3f7,ffffff,666666,0082cb,ecfbfd&dpc=1"></iframe>
    </div>

</div>

<script src="/js/post.js" type="text/javascript"></script>


	<div id="gotoTop">Top</div>


    <!--*********************************************************-->
    <!--****** 宝贝儿，看见这个时候，删掉下面的统计代码哦~ ******-->
    <!--*********************************************************-->
	<script>
	  (function(i,s,o,g,r,a,m){
		  i['GoogleAnalyticsObject']=r;i[r]=i[r] || function(){
			(i[r].q=i[r].q||[]).push(arguments)}, i[r].l=1*new Date();
			a=s.createElement(o), m=s.getElementsByTagName(o)[0];
			a.async=1;
			a.src=g;
			m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-48535193-1', 'ningg.github.io');
	  ga('send', 'pageview');
	</script>
    
	
    <script type="text/javascript">
		function gotoTop(min_height){
			$("#gotoTop").click(
				function(){$('html,body').animate({scrollTop:0},700);
			}).hover(
				function(){$(this).addClass("hover");},
				function(){$(this).removeClass("hover");
			});
			min_height ? min_height = min_height : min_height = 600;
			$(window).scroll(function(){
				
				var s = $(window).scrollTop();
				
				if( s > min_height){
					$("#gotoTop").fadeIn(100);
				}else{
					$("#gotoTop").fadeOut(200);
				};
			});
		};
		gotoTop();

        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })

    </script>
</body>
</html>
