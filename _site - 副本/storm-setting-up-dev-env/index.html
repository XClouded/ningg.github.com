<!DOCTYPE html>
<html xmlns:wb="http://open.weibo.com/wb">
<head>
    <!--   Author: NingG   -->
    <meta charset="utf-8" />
	<meta property="wb:webmaster" content="7ea7f3d5f3edad6a" />
    <title>Storm：setting up a development environment | ningg.top</title>
    <meta name="author" content="NingG" />
    <meta name="renderer" content="webkit">
    <meta name="description" content=" Storm官方文档的阅读和笔记  " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="" />
	
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
	
    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">NingG</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/ggningg/" target="_blank" style="margin-left:-5px;"><img src="http://www.weibo.com/favicon.ico" alt="" width="25"/></a>
            <a href="http://www.douban.com/people/ggningg/" target="_blank" style="text-align:center;"><img src="http://www.douban.com/favicon.ico" alt="" width="22"/></a>
			<a href="http://github.com/ningg" alt="" target="_blank" style="text-align:right;"><img src="/images/icon-cube-smaller.png" width="22"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/storm-setting-up-dev-env" title="Storm：setting up a development environment">Storm：setting up a development environment</a></h1>
        <p class="entry-date">2014-10-21</p>
        <blockquote>
  <p>原文地址：<a href="http://storm.apache.org/documentation/Setting-up-development-environment.html">Setting up a development environment</a>，本文使用<code>英文原文+中文注释</code>方式来写。</p>
</blockquote>

<p>This page outlines what you need to do to get a Storm development environment set up. In summary, the steps are:
（本文重点：set up a Storm dev env。概括一下，基本步骤如下）</p>

<ol>
  <li>Download a <a href="http://storm.apache.org//downloads.html">Storm release</a> , unpack it, and put the unpacked <code>bin/</code> directory on your <code>PATH</code></li>
  <li>To be able to start and stop topologies on a remote cluster, put the cluster information in <code>~/.storm/storm.yaml</code></li>
</ol>

<p>More detail on each of these steps is below.</p>

<h2 id="what-is-a-development-environment">What is a development environment?</h2>

<p>Storm has two modes of operation: <code>local mode</code> and <code>remote mode</code>. In local mode, you can develop and test topologies completely in process on your local machine. In remote mode, you submit topologies for execution on a cluster of machines.
（两种mode：local mode，develop和test topologies；remote mode，真正执行时，submit topologies到cluster）</p>

<p>A Storm development environment has everything installed so that you can develop and test Storm topologies in local mode, package topologies for execution on a remote cluster, and submit/kill topologies on a remote cluster.</p>

<p><strong>notes(ningg)</strong>：<code>storm devp env</code>要做三件事情：</p>

<ul>
  <li>在local mode下，develop和test topology；</li>
  <li>package topology for execution on a remote cluster；</li>
  <li>submit/kill topology on a remote cluster;</li>
</ul>

<p>Let’s quickly go over the relationship between your machine and a remote cluster. A Storm cluster is managed by a master node called “Nimbus”. Your machine communicates with Nimbus to submit code (packaged as a jar) and topologies for execution on the cluster, and Nimbus will take care of distributing that code around the cluster and assigning workers to run your topology. Your machine uses a command line client called <code>storm</code> to communicate with Nimbus. The <code>storm</code> client is only used for remote mode; it is not used for developing and testing topologies in local mode.</p>

<p><strong>notes(ningg)</strong>：梳理一下your machine与remote cluster的交互流程：</p>

<ul>
  <li>storm cluster由master来管理，master node又称为<code>Nimbus</code>；</li>
  <li>your machine向<code>Nimbus</code>提交代码（打包为jar包）、提交topology；</li>
  <li><code>Nimbus</code>将jar包分发到worker node，并且分配worker来run topology；</li>
  <li>your machine通过command line client <code>storm</code> 与 <code>Nimbus</code> 交互，<code>storm</code>命令只用于与remote storm cluster交互，不用于 testing and testing topology；</li>
</ul>

<p><strong>notes(ningg)</strong>：distribute code？与assign worker to run topologies有区别吗？
<strong>RE</strong>：distribute code到物理上的node？assign worker to run topologies针对的是不同物理主机上的worker process；（这个理解对吗？）</p>

<h2 id="installing-a-storm-release-locally">Installing a Storm release locally</h2>

<p>If you want to be able to submit topologies to a remote cluster from your machine, you should install a Storm release locally. Installing a Storm release will give you the <code>storm</code> client that you can use to interact with remote clusters. To install Storm locally, download a release <a href="https://github.com/apache/incubator-storm/downloads">from here</a> and unzip it somewhere on your computer. Then add the unpacked <code>bin/</code> directory onto your <code>PATH</code> and make sure the <code>bin/storm</code> script is executable.
（本地安装的Storm，也可以作为与remote cluster交互的client；安装办法：下载、解压、添加bin到PATH）</p>

<p>Installing a Storm release locally is only for interacting with remote clusters. For developing and testing topologies in local mode, it is recommended that you use Maven to include Storm as a dev dependency for your project. You can read more about using Maven for this purpose on <a href="http://storm.apache.org/documentation/Maven.html">Maven</a>.</p>

<p>特别说明两点：</p>

<ul>
  <li>本地安装Storm唯一目标：interact with remote cluster；</li>
  <li>如果想利用local mode来进行develop、test，建议使用Maven将Storm作为依赖导入；</li>
</ul>

<h2 id="starting-and-stopping-topologies-on-a-remote-cluster">Starting and stopping topologies on a remote cluster</h2>

<p>The previous step installed the <code>storm</code> client on your machine which is used to communicate with remote Storm clusters. Now all you have to do is tell the client which Storm cluster to talk to. To do this, all you have to do is put the host address of the master in the <code>~/.storm/storm.yaml</code> file. It should look something like this:
（在本地安装storm实质是为了interact with remote cluster，这就需要告诉本地storm：remote cluster的位置。）</p>

<pre><code>nimbus.host: "123.45.678.890"
</code></pre>

<p>Alternatively, if you use the <a href="https://github.com/nathanmarz/storm-deploy">storm-deploy</a> project to provision Storm clusters on AWS, it will automatically set up your ~/.storm/storm.yaml file. You can manually attach to a Storm cluster (or switch between multiple clusters) using the “attach” command, like so:
（还有一种方法：如果Storm部署在AWS上，可直接使用 “attach” command）</p>

<pre><code>lein run :deploy --attach --name mystormcluster
</code></pre>

<p>More information is on the storm-deploy <a href="https://github.com/nathanmarz/storm-deploy/wiki">wiki</a></p>

<h2 id="section">参考来源</h2>

<ul>
  <li><a href="http://storm.apache.org/">Apache Storm</a></li>
  <li><a href="http://storm.apache.org/documentation/Rationale.html">Apache Storm: Documentation Rationale</a></li>
</ul>



        <div id="disqus_container">
            <div style="margin-bottom:20px" class="right">
				<wb:share-button appkey="2306590132" addition="simple" type="button" ralateUid="2356527183"></wb:share-button>
            </div>
            <!--<a href="#" class="comment" onclick="return false;">点击查看评论</a>-->
            <div id="disqus_thread"></div>
        </div>
    </div>

	
    <div class="sidenav">
		<iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=2356527183&verifier=1ccfb61e&colors=d6f3f7,ffffff,666666,0082cb,ecfbfd&dpc=1"></iframe>
    </div>

</div>

<script src="/js/post.js" type="text/javascript"></script>


	<div id="gotoTop">Top</div>


    <!--*********************************************************-->
    <!--****** 宝贝儿，看见这个时候，删掉下面的统计代码哦~ ******-->
    <!--*********************************************************-->
	<script>
	  (function(i,s,o,g,r,a,m){
		  i['GoogleAnalyticsObject']=r;i[r]=i[r] || function(){
			(i[r].q=i[r].q||[]).push(arguments)}, i[r].l=1*new Date();
			a=s.createElement(o), m=s.getElementsByTagName(o)[0];
			a.async=1;
			a.src=g;
			m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-48535193-1', 'ningg.github.io');
	  ga('send', 'pageview');
	</script>
    
	
    <script type="text/javascript">
		function gotoTop(min_height){
			$("#gotoTop").click(
				function(){$('html,body').animate({scrollTop:0},700);
			}).hover(
				function(){$(this).addClass("hover");},
				function(){$(this).removeClass("hover");
			});
			min_height ? min_height = min_height : min_height = 600;
			$(window).scroll(function(){
				
				var s = $(window).scrollTop();
				
				if( s > min_height){
					$("#gotoTop").fadeIn(100);
				}else{
					$("#gotoTop").fadeOut(200);
				};
			});
		};
		gotoTop();

        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })

    </script>
</body>
</html>
